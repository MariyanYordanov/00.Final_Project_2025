import{a as ce,b as fe,c as ge,d as he,e as _e}from"./chunk-RAH6D5VP.js";import"./chunk-BK2YRY5J.js";import{a as te,b as re}from"./chunk-HGI3PL2L.js";import"./chunk-NMV2ODWC.js";import{b as Q,c as X}from"./chunk-7KHUR65R.js";import{a as K}from"./chunk-HXPN3HR5.js";import{b as N,d as s,f as R,g as D,j as P,k,l as L,m as A,n as q,p as O,r as H,s as W,u as de,x as J}from"./chunk-P6HG5VUA.js";import{a as T,b as G,c as V,e as j,f as U,g as z,h as $,i as ee}from"./chunk-ZDLTPOFL.js";import{W as Y,X as Z}from"./chunk-6DOHFCOB.js";import{a as x}from"./chunk-45MAATW5.js";import{a as se,c as w,d as y}from"./chunk-XTCHCJBU.js";import{i as B,n as I}from"./chunk-P3IMMIVJ.js";import{Ab as m,Bb as i,Cb as e,Db as p,E as F,Kb as le,Ob as b,Sa as a,Xa as f,_b as pe,cb as S,cc as u,da as ae,ea as me,ec as E,ib as d,j as C,y as M}from"./chunk-3PJXDOL5.js";import"./chunk-4CLCTAJ7.js";function Ne(r,n){r&1&&(i(0,"mat-error"),u(1," \u041C\u043E\u043B\u044F \u0432\u044A\u0432\u0435\u0434\u0435\u0442\u0435 \u0432\u0430\u043B\u0438\u0434\u0435\u043D email "),e())}function Re(r,n){r&1&&(i(0,"mat-error"),u(1," \u041F\u0430\u0440\u043E\u043B\u0430\u0442\u0430 \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u0430 "),e())}function De(r,n){r&1&&p(0,"mat-spinner",10)}var ie=class r{constructor(n,o,t,l,c){this.fb=n;this.authService=o;this.router=t;this.route=l;this.snackBar=c;this.loginForm=this.fb.group({email:["",[s.required,s.email]],password:["",[s.required]]})}loginForm;isLoading=!1;returnUrl="/families";ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/families",this.authService.isAuthenticated()&&this.router.navigate([this.returnUrl])}onSubmit(){if(this.loginForm.valid){this.isLoading=!0;let n=this.loginForm.value;this.authService.login(n).pipe(M(o=>(this.snackBar.open(o.error?.message||"\u0413\u0440\u0435\u0448\u043A\u0430 \u043F\u0440\u0438 \u0432\u043B\u0438\u0437\u0430\u043D\u0435. \u041C\u043E\u043B\u044F \u043E\u043F\u0438\u0442\u0430\u0439\u0442\u0435 \u043E\u0442\u043D\u043E\u0432\u043E.","\u0417\u0430\u0442\u0432\u043E\u0440\u0438",{duration:5e3}),C(null))),F(()=>this.isLoading=!1)).subscribe(o=>{o&&(this.snackBar.open("\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0432\u043B\u0438\u0437\u0430\u043D\u0435!","\u0417\u0430\u0442\u0432\u043E\u0440\u0438",{duration:3e3}),this.router.navigate([this.returnUrl]))})}}static \u0275fac=function(o){return new(o||r)(f(q),f(x),f(w),f(se),f(te))};static \u0275cmp=S({type:r,selectors:[["app-login"]],decls:25,vars:6,consts:[[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","required",""],[4,"ngIf"],["matInput","","type","password","formControlName","password","required",""],["mat-raised-button","","color","primary","type","submit",1,"full-width","submit-button",3,"disabled"],["diameter","20",4,"ngIf"],["routerLink","/auth/register","mat-button","","color","accent"],["diameter","20"]],template:function(o,t){if(o&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),u(4,"\u0412\u0445\u043E\u0434 \u0432 World Family"),e()(),i(5,"mat-card-content")(6,"form",2),b("ngSubmit",function(){return t.onSubmit()}),i(7,"mat-form-field",3)(8,"mat-label"),u(9,"Email"),e(),p(10,"input",4),d(11,Ne,2,0,"mat-error",5),e(),i(12,"mat-form-field",3)(13,"mat-label"),u(14,"\u041F\u0430\u0440\u043E\u043B\u0430"),e(),p(15,"input",6),d(16,Re,2,0,"mat-error",5),e(),i(17,"button",7),d(18,De,1,0,"mat-spinner",8),u(19),e()()(),i(20,"mat-card-actions")(21,"p"),u(22,"\u041D\u044F\u043C\u0430\u0442\u0435 \u0430\u043A\u0430\u0443\u043D\u0442? "),i(23,"a",9),u(24,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0439\u0442\u0435 \u0441\u0435"),e()()()()()),o&2){let l,c;a(6),m("formGroup",t.loginForm),a(5),m("ngIf",((l=t.loginForm.get("email"))==null?null:l.invalid)&&((l=t.loginForm.get("email"))==null?null:l.touched)),a(5),m("ngIf",((c=t.loginForm.get("password"))==null?null:c.invalid)&&((c=t.loginForm.get("password"))==null?null:c.touched)),a(),m("disabled",t.loginForm.invalid||t.isLoading),a(),m("ngIf",t.isLoading),a(),E(" ",t.isLoading?"\u0412\u043B\u0438\u0437\u0430\u043D\u0435...":"\u0412\u043B\u0435\u0437"," ")}},dependencies:[I,B,O,P,N,R,D,A,k,L,y,z,T,j,V,U,G,K,J,H,W,X,Q,Z,Y,ee,$,re],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2)}.auth-card[_ngcontent-%COMP%]{max-width:400px;width:100%}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.submit-button[_ngcontent-%COMP%]{margin-top:16px;height:48px}mat-card-title[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:0}mat-card-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center}"]})};function Pe(r,n){r&1&&(i(0,"mat-error"),u(1," \u0418\u043C\u0435\u0442\u043E \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E "),e())}function ke(r,n){r&1&&(i(0,"mat-error"),u(1," \u041F\u0440\u0435\u0437\u0438\u043C\u0435\u0442\u043E \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E "),e())}function Le(r,n){r&1&&(i(0,"mat-error"),u(1," \u0424\u0430\u043C\u0438\u043B\u0438\u044F\u0442\u0430 \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u0430 "),e())}function Ae(r,n){r&1&&(i(0,"mat-error"),u(1," \u041C\u043E\u043B\u044F \u0432\u044A\u0432\u0435\u0434\u0435\u0442\u0435 \u0432\u0430\u043B\u0438\u0434\u0435\u043D email "),e())}function qe(r,n){r&1&&(i(0,"mat-error"),u(1," \u041F\u0430\u0440\u043E\u043B\u0430\u0442\u0430 \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0435 \u043F\u043E\u043D\u0435 6 \u0441\u0438\u043C\u0432\u043E\u043B\u0430 "),e())}function Oe(r,n){r&1&&(i(0,"mat-error"),u(1," \u041F\u043E\u0442\u0432\u044A\u0440\u0434\u0435\u043D\u0430\u0442\u0430 \u043F\u0430\u0440\u043E\u043B\u0430 \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u0430 "),e())}function Te(r,n){r&1&&(i(0,"mat-error"),u(1," \u041F\u0430\u0440\u043E\u043B\u0438\u0442\u0435 \u043D\u0435 \u0441\u044A\u0432\u043F\u0430\u0434\u0430\u0442 "),e())}function Ge(r,n){r&1&&p(0,"mat-spinner",19)}function Ve(r){let n=r.get("password"),o=r.get("confirmPassword");return n&&o&&n.value!==o.value?{passwordMismatch:!0}:null}var ue=class r{constructor(n,o,t,l){this.fb=n;this.authService=o;this.router=t;this.snackBar=l;this.registerForm=this.fb.group({firstName:["",[s.required]],middleName:["",[s.required]],lastName:["",[s.required]],email:["",[s.required,s.email]],password:["",[s.required,s.minLength(6)]],confirmPassword:["",[s.required]],dateOfBirth:[""]},{validators:Ve})}registerForm;isLoading=!1;onSubmit(){if(this.registerForm.valid){this.isLoading=!0;let n=this.registerForm.value;this.authService.register(n).pipe(M(o=>(this.snackBar.open(o.error?.message||"\u0413\u0440\u0435\u0448\u043A\u0430 \u043F\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F. \u041C\u043E\u043B\u044F \u043E\u043F\u0438\u0442\u0430\u0439\u0442\u0435 \u043E\u0442\u043D\u043E\u0432\u043E.","\u0417\u0430\u0442\u0432\u043E\u0440\u0438",{duration:5e3}),C(null))),F(()=>this.isLoading=!1)).subscribe(o=>{o&&(this.snackBar.open("\u0423\u0441\u043F\u0435\u0448\u043D\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F!","\u0417\u0430\u0442\u0432\u043E\u0440\u0438",{duration:3e3}),this.router.navigate(["/families"]))})}}static \u0275fac=function(o){return new(o||r)(f(q),f(x),f(w),f(te))};static \u0275cmp=S({type:r,selectors:[["app-register"]],decls:54,vars:13,consts:[["picker",""],[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit","formGroup"],[1,"name-row"],["appearance","outline",1,"name-field"],["matInput","","formControlName","firstName","required",""],[4,"ngIf"],["matInput","","formControlName","middleName","required",""],["matInput","","formControlName","lastName","required",""],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","required",""],["matInput","","formControlName","dateOfBirth",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","type","password","formControlName","password","required",""],["matInput","","type","password","formControlName","confirmPassword","required",""],["mat-raised-button","","color","primary","type","submit",1,"full-width","submit-button",3,"disabled"],["diameter","20",4,"ngIf"],["routerLink","/auth/login","mat-button","","color","accent"],["diameter","20"]],template:function(o,t){if(o&1){let l=le();i(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title"),u(4,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u0432 World Family"),e()(),i(5,"mat-card-content")(6,"form",3),b("ngSubmit",function(){return ae(l),me(t.onSubmit())}),i(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),u(10,"\u0418\u043C\u0435"),e(),p(11,"input",6),d(12,Pe,2,0,"mat-error",7),e(),i(13,"mat-form-field",5)(14,"mat-label"),u(15,"\u041F\u0440\u0435\u0437\u0438\u043C\u0435"),e(),p(16,"input",8),d(17,ke,2,0,"mat-error",7),e(),i(18,"mat-form-field",5)(19,"mat-label"),u(20,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"),e(),p(21,"input",9),d(22,Le,2,0,"mat-error",7),e()(),i(23,"mat-form-field",10)(24,"mat-label"),u(25,"Email"),e(),p(26,"input",11),d(27,Ae,2,0,"mat-error",7),e(),i(28,"mat-form-field",10)(29,"mat-label"),u(30,"\u0414\u0430\u0442\u0430 \u043D\u0430 \u0440\u0430\u0436\u0434\u0430\u043D\u0435"),e(),p(31,"input",12)(32,"mat-datepicker-toggle",13)(33,"mat-datepicker",null,0),e(),i(35,"mat-form-field",10)(36,"mat-label"),u(37,"\u041F\u0430\u0440\u043E\u043B\u0430"),e(),p(38,"input",14),d(39,qe,2,0,"mat-error",7),e(),i(40,"mat-form-field",10)(41,"mat-label"),u(42,"\u041F\u043E\u0442\u0432\u044A\u0440\u0434\u0435\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u0430\u0442\u0430"),e(),p(43,"input",15),d(44,Oe,2,0,"mat-error",7)(45,Te,2,0,"mat-error",7),e(),i(46,"button",16),d(47,Ge,1,0,"mat-spinner",17),u(48),e()()(),i(49,"mat-card-actions")(50,"p"),u(51,"\u0412\u0435\u0447\u0435 \u0438\u043C\u0430\u0442\u0435 \u0430\u043A\u0430\u0443\u043D\u0442? "),i(52,"a",18),u(53,"\u0412\u043B\u0435\u0437\u0442\u0435"),e()()()()()}if(o&2){let l,c,g,h,_,v,ne,oe=pe(34);a(6),m("formGroup",t.registerForm),a(6),m("ngIf",((l=t.registerForm.get("firstName"))==null?null:l.invalid)&&((l=t.registerForm.get("firstName"))==null?null:l.touched)),a(5),m("ngIf",((c=t.registerForm.get("middleName"))==null?null:c.invalid)&&((c=t.registerForm.get("middleName"))==null?null:c.touched)),a(5),m("ngIf",((g=t.registerForm.get("lastName"))==null?null:g.invalid)&&((g=t.registerForm.get("lastName"))==null?null:g.touched)),a(5),m("ngIf",((h=t.registerForm.get("email"))==null?null:h.invalid)&&((h=t.registerForm.get("email"))==null?null:h.touched)),a(4),m("matDatepicker",oe),a(),m("for",oe),a(7),m("ngIf",((_=t.registerForm.get("password"))==null?null:_.invalid)&&((_=t.registerForm.get("password"))==null?null:_.touched)),a(5),m("ngIf",((v=t.registerForm.get("confirmPassword"))==null?null:v.invalid)&&((v=t.registerForm.get("confirmPassword"))==null?null:v.touched)),a(),m("ngIf",t.registerForm.hasError("passwordMismatch")&&((ne=t.registerForm.get("confirmPassword"))==null?null:ne.touched)),a(),m("disabled",t.registerForm.invalid||t.isLoading),a(),m("ngIf",t.isLoading),a(),E(" ",t.isLoading?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u043D\u0435...":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0439 \u0441\u0435"," ")}},dependencies:[I,B,O,P,N,R,D,A,k,L,y,z,T,j,V,U,G,K,J,H,W,de,X,Q,Z,Y,ee,$,re,he,ce,fe,ge,_e],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2)}.auth-card[_ngcontent-%COMP%]{max-width:500px;width:100%}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.name-row[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:16px}.name-field[_ngcontent-%COMP%]{flex:1}.submit-button[_ngcontent-%COMP%]{margin-top:16px;height:48px}mat-card-title[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:0}mat-card-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center}@media (max-width: 600px){.name-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}}"]})};var wt=[{path:"login",component:ie},{path:"register",component:ue},{path:"",redirectTo:"login",pathMatch:"full"}];export{wt as authRoutes};

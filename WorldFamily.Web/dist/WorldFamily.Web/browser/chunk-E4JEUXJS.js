import{a as ce,b as se}from"./chunk-XYUZ2X3A.js";import{a as ue,b as ae,c as ne,d as me,e as le}from"./chunk-RAH6D5VP.js";import{c as oe}from"./chunk-BK2YRY5J.js";import{a as ie,b as re}from"./chunk-HGI3PL2L.js";import"./chunk-NMV2ODWC.js";import{b as X,c as Y}from"./chunk-7KHUR65R.js";import{a as W}from"./chunk-HXPN3HR5.js";import{b as N,d,f as O,g as P,j as k,k as q,l as w,m as A,n as R,p as T,r as H,s as K,t as J,u as Q,x as U}from"./chunk-P6HG5VUA.js";import{a as fe}from"./chunk-LC6B2GZH.js";import{a as de,b as pe}from"./chunk-XUDR7UJO.js";import{a as j,b as L,c as V,f as G,g as z,h as ee,i as te}from"./chunk-ZDLTPOFL.js";import{W as Z,X as $}from"./chunk-6DOHFCOB.js";import{a as D,c as B}from"./chunk-XTCHCJBU.js";import{i as y,n as I}from"./chunk-P3IMMIVJ.js";import{Ab as m,Bb as t,Cb as e,Db as l,Kb as S,Ob as b,Sa as n,Xa as f,_b as F,cb as x,cc as i,da as g,ea as M,ib as c}from"./chunk-3PJXDOL5.js";import{a as _,b as h}from"./chunk-4CLCTAJ7.js";function Me(u,o){u&1&&(t(0,"mat-error"),i(1," \u0418\u043C\u0435\u0442\u043E \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E "),e())}function be(u,o){u&1&&(t(0,"mat-error"),i(1," \u041F\u0440\u0435\u0437\u0438\u043C\u0435\u0442\u043E \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E "),e())}function Ce(u,o){u&1&&(t(0,"mat-error"),i(1," \u0424\u0430\u043C\u0438\u043B\u0438\u044F\u0442\u0430 \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u0430 "),e())}function Ee(u,o){u&1&&(t(0,"mat-error"),i(1," \u041F\u043E\u043B\u044A\u0442 \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u0435\u043D "),e())}function ve(u,o){u&1&&(t(0,"div",25),l(1,"mat-spinner"),t(2,"p"),i(3,"\u0414\u043E\u0431\u0430\u0432\u044F\u043D\u0435 \u043D\u0430 \u0447\u043B\u0435\u043D..."),e()())}var ge=class u{constructor(o,a,r,p,s){this.fb=o;this.memberService=a;this.router=r;this.route=p;this.snackBar=s}memberForm;isLoading=!1;familyId;ngOnInit(){this.familyId=+this.route.snapshot.params.familyId,this.memberForm=this.fb.group({firstName:["",[d.required,d.minLength(2)]],middleName:["",[d.required,d.minLength(2)]],lastName:["",[d.required,d.minLength(2)]],gender:["",d.required],dateOfBirth:[""],placeOfBirth:[""],biography:[""]})}onSubmit(){if(this.memberForm.invalid)return;this.isLoading=!0;let o=h(_({},this.memberForm.value),{familyId:this.familyId});this.memberService.createMember(o).subscribe({next:a=>{this.snackBar.open("\u0427\u043B\u0435\u043D\u044A\u0442 \u0435 \u0434\u043E\u0431\u0430\u0432\u0435\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E!","OK",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"}),this.router.navigate(["/families",this.familyId])},error:a=>{console.error("Error creating member:",a),this.isLoading=!1;let r="\u0413\u0440\u0435\u0448\u043A\u0430 \u043F\u0440\u0438 \u0434\u043E\u0431\u0430\u0432\u044F\u043D\u0435 \u043D\u0430 \u0447\u043B\u0435\u043D";a.status===401?(r="\u041C\u043E\u043B\u044F, \u0432\u043B\u0435\u0437\u0442\u0435 \u0432 \u043F\u0440\u043E\u0444\u0438\u043B\u0430 \u0441\u0438",this.router.navigate(["/auth/login"])):a.error?.errors&&(r=Object.values(a.error.errors).flat().join(", ")),this.snackBar.open(r,"OK",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"})}})}onCancel(){this.router.navigate(["/families",this.familyId])}static \u0275fac=function(a){return new(a||u)(f(R),f(fe),f(B),f(D),f(ie))};static \u0275cmp=x({type:u,selectors:[["app-member-create"]],decls:64,vars:9,consts:[["birthPicker",""],[1,"create-container"],[1,"create-card"],[3,"ngSubmit","formGroup"],[1,"name-fields"],["appearance","fill",1,"name-field"],["matInput","","formControlName","firstName","placeholder","\u0418\u0432\u0430\u043D","required",""],[4,"ngIf"],["matInput","","formControlName","middleName","placeholder","\u041F\u0435\u0442\u0440\u043E\u0432","required",""],["matInput","","formControlName","lastName","placeholder","\u0418\u0432\u0430\u043D\u043E\u0432","required",""],[1,"info-fields"],["appearance","fill",1,"info-field"],["formControlName","gender","required",""],["value","Male"],["value","Female"],["matInput","","formControlName","dateOfBirth","placeholder","\u0414\u0414/\u041C\u041C/\u0413\u0413\u0413\u0413",3,"matDatepicker"],["matSuffix","",3,"for"],["appearance","fill",1,"full-width"],["matInput","","formControlName","placeOfBirth","placeholder","\u0421\u043E\u0444\u0438\u044F, \u0411\u044A\u043B\u0433\u0430\u0440\u0438\u044F"],["matSuffix",""],["matInput","","formControlName","biography","rows","4","placeholder","\u0420\u0430\u0437\u043A\u0430\u0436\u0435\u0442\u0435 \u0437\u0430 \u0442\u043E\u0437\u0438 \u0447\u043B\u0435\u043D \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E\u0442\u043E..."],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["class","loading-overlay",4,"ngIf"],[1,"loading-overlay"]],template:function(a,r){if(a&1){let p=S();t(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),i(5,"person_add"),e(),i(6," \u0414\u043E\u0431\u0430\u0432\u0438 \u0447\u043B\u0435\u043D \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E\u0442\u043E "),e()(),t(7,"mat-card-content")(8,"form",3),b("ngSubmit",function(){return g(p),M(r.onSubmit())}),t(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),i(12,"\u0418\u043C\u0435"),e(),l(13,"input",6),c(14,Me,2,0,"mat-error",7),e(),t(15,"mat-form-field",5)(16,"mat-label"),i(17,"\u041F\u0440\u0435\u0437\u0438\u043C\u0435"),e(),l(18,"input",8),c(19,be,2,0,"mat-error",7),e(),t(20,"mat-form-field",5)(21,"mat-label"),i(22,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"),e(),l(23,"input",9),c(24,Ce,2,0,"mat-error",7),e()(),t(25,"div",10)(26,"mat-form-field",11)(27,"mat-label"),i(28,"\u041F\u043E\u043B"),e(),t(29,"mat-select",12)(30,"mat-option",13),i(31,"\u041C\u044A\u0436"),e(),t(32,"mat-option",14),i(33,"\u0416\u0435\u043D\u0430"),e()(),c(34,Ee,2,0,"mat-error",7),e(),t(35,"mat-form-field",11)(36,"mat-label"),i(37,"\u0414\u0430\u0442\u0430 \u043D\u0430 \u0440\u0430\u0436\u0434\u0430\u043D\u0435"),e(),l(38,"input",15)(39,"mat-datepicker-toggle",16)(40,"mat-datepicker",null,0),e()(),t(42,"mat-form-field",17)(43,"mat-label"),i(44,"\u041C\u044F\u0441\u0442\u043E \u043D\u0430 \u0440\u0430\u0436\u0434\u0430\u043D\u0435"),e(),l(45,"input",18),t(46,"mat-icon",19),i(47,"location_on"),e()(),t(48,"mat-form-field",17)(49,"mat-label"),i(50,"\u0411\u0438\u043E\u0433\u0440\u0430\u0444\u0438\u044F"),e(),l(51,"textarea",20),t(52,"mat-hint"),i(53,"\u041E\u043F\u0446\u0438\u043E\u043D\u0430\u043B\u043D\u043E - \u0434\u043E\u0431\u0430\u0432\u0435\u0442\u0435 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u0437\u0430 \u0436\u0438\u0432\u043E\u0442\u0430 \u0438 \u0438\u0441\u0442\u043E\u0440\u0438\u044F\u0442\u0430"),e()(),t(54,"div",21)(55,"button",22),b("click",function(){return g(p),M(r.onCancel())}),t(56,"mat-icon"),i(57,"close"),e(),i(58," \u041E\u0442\u043A\u0430\u0437 "),e(),t(59,"button",23)(60,"mat-icon"),i(61,"save"),e(),i(62," \u0414\u043E\u0431\u0430\u0432\u0438 \u0447\u043B\u0435\u043D "),e()()()(),c(63,ve,4,0,"div",24),e()()}if(a&2){let p,s,C,E,v=F(41);n(8),m("formGroup",r.memberForm),n(6),m("ngIf",(p=r.memberForm.get("firstName"))==null?null:p.hasError("required")),n(5),m("ngIf",(s=r.memberForm.get("middleName"))==null?null:s.hasError("required")),n(5),m("ngIf",(C=r.memberForm.get("lastName"))==null?null:C.hasError("required")),n(10),m("ngIf",(E=r.memberForm.get("gender"))==null?null:E.hasError("required")),n(4),m("matDatepicker",v),n(),m("for",v),n(20),m("disabled",r.memberForm.invalid||r.isLoading),n(4),m("ngIf",r.isLoading)}},dependencies:[I,y,T,k,N,O,P,A,q,w,z,j,V,G,L,W,U,H,J,K,Q,Y,X,$,Z,pe,de,se,ce,oe,me,ue,ae,ne,le,te,ee,re],styles:[".create-container[_ngcontent-%COMP%]{padding:24px;max-width:800px;margin:0 auto}.create-card[_ngcontent-%COMP%]{position:relative}mat-card-header[_ngcontent-%COMP%]{margin-bottom:24px}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:1.5rem}.name-fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-bottom:16px}.name-field[_ngcontent-%COMP%]{width:100%}.info-fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.info-field[_ngcontent-%COMP%]{width:100%}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;border-radius:4px}@media (max-width: 768px){.name-fields[_ngcontent-%COMP%], .info-fields[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{ge as MemberCreateComponent};

import{b as it,c as nt}from"./chunk-7KHUR65R.js";import"./chunk-HXPN3HR5.js";import{b as W,f as R,i as H,o as U,r as Z,u as tt,x as et}from"./chunk-P6HG5VUA.js";import{a as ct}from"./chunk-6QGJ2LHV.js";import{a as st}from"./chunk-Z7ZUHWT3.js";import{a as mt,b as lt}from"./chunk-XUDR7UJO.js";import{a as Y,b as q,c as G,d as J,e as K,f as Q,g as X,h as ot,i as rt}from"./chunk-ZDLTPOFL.js";import{W as at,X as ut}from"./chunk-6DOHFCOB.js";import{d as V}from"./chunk-XTCHCJBU.js";import{h as L,i as $,k as j,m as z,n as N}from"./chunk-P3IMMIVJ.js";import{A as h,Ab as m,Bb as n,Cb as t,Db as P,Kb as D,N as M,O as v,Ob as x,P as E,Qb as g,Sa as o,Xa as S,cb as O,cc as i,da as b,dc as I,ea as F,ec as p,f as _,hc as T,ib as c,ic as w,j as C,jc as B,mc as A,nc as d,oc as f,qc as k,y}from"./chunk-3PJXDOL5.js";import"./chunk-4CLCTAJ7.js";var dt=a=>["/families",a];function gt(a,u){a&1&&(n(0,"div",10),P(1,"mat-spinner"),n(2,"p"),i(3,"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043D\u0435 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430..."),t()())}function ft(a,u){if(a&1){let e=D();n(0,"div",11)(1,"mat-icon",12),i(2,"error"),t(),n(3,"p"),i(4),t(),n(5,"button",13),x("click",function(){b(e);let l=g();return F(l.loadFamilies())}),i(6," \u041E\u043F\u0438\u0442\u0430\u0439\u0442\u0435 \u043E\u0442\u043D\u043E\u0432\u043E "),t()()}if(a&2){let e=g();o(4),p("\u0412\u044A\u0437\u043D\u0438\u043A\u043D\u0430 \u0433\u0440\u0435\u0448\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0440\u0435\u0436\u0434\u0430\u043D\u0435\u0442\u043E: ",e.error)}}function _t(a,u){a&1&&(n(0,"span"),i(1,"..."),t())}function Ct(a,u){a&1&&(n(0,"span",20)(1,"mat-icon"),i(2,"public"),t(),i(3," \u041F\u0443\u0431\u043B\u0438\u0447\u043D\u043E "),t())}function xt(a,u){a&1&&(n(0,"span",20)(1,"mat-icon"),i(2,"lock"),t(),i(3," \u0427\u0430\u0441\u0442\u043D\u043E "),t())}function yt(a,u){a&1&&(n(0,"button",24)(1,"mat-icon"),i(2,"share"),t(),i(3," \u0421\u043F\u043E\u0434\u0435\u043B\u0435 "),t())}function ht(a,u){if(a&1&&(n(0,"mat-card",16)(1,"mat-card-header")(2,"mat-card-title"),i(3),t(),n(4,"mat-card-subtitle"),i(5),d(6,"relativeDate"),t()(),n(7,"mat-card-content")(8,"p",17),i(9),d(10,"slice"),c(11,_t,2,0,"span",18),t(),n(12,"div",19)(13,"span",20)(14,"mat-icon"),i(15,"people"),t(),i(16),t(),c(17,Ct,4,0,"span",21)(18,xt,4,0,"span",21),t()(),n(19,"mat-card-actions")(20,"button",22)(21,"mat-icon"),i(22,"visibility"),t(),i(23," \u0420\u0430\u0437\u0433\u043B\u0435\u0434\u0430\u0439 "),t(),c(24,yt,4,0,"button",23),t()()),a&2){let e=u.$implicit;o(3),I(e.name),o(2),p(" \u0421\u044A\u0437\u0434\u0430\u0434\u0435\u043D\u043E ",f(6,9,e.createdAt)," "),o(4),p(" ",k(10,11,e.description||"\u041D\u044F\u043C\u0430 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",0,150)," "),o(2),m("ngIf",e.description&&e.description.length>150),o(5),p(" ",e.memberCount||0," \u0447\u043B\u0435\u043D\u043E\u0432\u0435 "),o(),m("ngIf",e.isPublic),o(),m("ngIf",!e.isPublic),o(2),m("routerLink",A(15,dt,e.id)),o(4),m("ngIf",e.isPublic)}}function Mt(a,u){if(a&1&&(n(0,"div",14),c(1,ht,25,17,"mat-card",15),d(2,"async"),t()),a&2){let e=g();o(),m("ngForOf",f(2,2,e.filteredFamilies$))("ngForTrackBy",e.trackByFamilyId)}}function vt(a,u){a&1&&(n(0,"div",25)(1,"mat-icon"),i(2,"family_restroom"),t(),n(3,"h3"),i(4,"\u041D\u044F\u043C\u0430 \u043D\u0430\u043C\u0435\u0440\u0435\u043D\u0438 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430"),t(),n(5,"p"),i(6,"\u041E\u043F\u0438\u0442\u0430\u0439\u0442\u0435 \u0441 \u0440\u0430\u0437\u043B\u0438\u0447\u0435\u043D \u0442\u0435\u0440\u043C\u0438\u043D \u0437\u0430 \u0442\u044A\u0440\u0441\u0435\u043D\u0435 \u0438\u043B\u0438 \u0441\u044A\u0437\u0434\u0430\u0439\u0442\u0435 \u043D\u043E\u0432\u043E \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E."),t(),n(7,"button",26)(8,"mat-icon"),i(9,"add"),t(),i(10," \u0421\u044A\u0437\u0434\u0430\u0439 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E "),t()())}var pt=class a{constructor(u){this.familyService=u;this.families$=this.familyService.families$,this.filteredFamilies$=this.searchSubject.pipe(M(""),h(300),v(e=>this.familyService.searchFamilies(C(e))),y(e=>(this.error="\u0413\u0440\u0435\u0448\u043A\u0430 \u043F\u0440\u0438 \u0442\u044A\u0440\u0441\u0435\u043D\u0435 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430",C([]))))}destroy$=new _;searchSubject=new _;families$;filteredFamilies$;isLoading=!0;error=null;searchTerm="";ngOnInit(){this.loadFamilies()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadFamilies(){this.isLoading=!0,this.error=null,this.familyService.getFamilies().pipe(E(this.destroy$)).subscribe({next:u=>{this.isLoading=!1,this.searchSubject.next(this.searchTerm)},error:u=>{this.isLoading=!1,this.error="\u041D\u0435\u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0440\u0435\u0436\u0434\u0430\u043D\u0435 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430. \u041C\u043E\u043B\u044F \u043E\u043F\u0438\u0442\u0430\u0439\u0442\u0435 \u043E\u0442\u043D\u043E\u0432\u043E.",console.error("Error loading families:",u)}})}onSearchChange(u){let e=u.target.value;this.searchTerm=e,this.searchSubject.next(e)}trackByFamilyId(u,e){return e.id}static \u0275fac=function(e){return new(e||a)(S(st))};static \u0275cmp=O({type:a,selectors:[["app-family-catalog"]],decls:21,vars:7,consts:[[1,"catalog-container"],[1,"header-section"],["mat-raised-button","","color","primary","routerLink","/families/create",1,"create-button"],["appearance","outline",1,"search-field"],["matInput","","placeholder","\u0412\u044A\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043C\u0435 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E...",3,"ngModelChange","input","ngModel"],["matSuffix",""],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","families-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-container"],[1,"error-container"],["color","warn"],["mat-raised-button","","color","primary",3,"click"],[1,"families-grid"],["class","family-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"family-card"],[1,"family-description"],[4,"ngIf"],[1,"family-stats"],[1,"stat"],["class","stat",4,"ngIf"],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","accent",4,"ngIf"],["mat-button","","color","accent"],[1,"empty-state"],["mat-raised-button","","color","primary","routerLink","/families/create"]],template:function(e,r){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),i(3,"\u041A\u0430\u0442\u0430\u043B\u043E\u0433 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430"),t(),n(4,"p"),i(5,"\u0420\u0430\u0437\u0433\u043B\u0435\u0434\u0430\u0439\u0442\u0435 \u0441\u0435\u043C\u0435\u0439\u043D\u0438\u0442\u0435 \u0438\u0441\u0442\u043E\u0440\u0438\u0438 \u0438 \u043E\u0442\u043A\u0440\u0438\u0439\u0442\u0435 \u0432\u0440\u044A\u0437\u043A\u0438"),t(),n(6,"button",2)(7,"mat-icon"),i(8,"add"),t(),i(9," \u0421\u044A\u0437\u0434\u0430\u0439 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E "),t(),n(10,"mat-form-field",3)(11,"mat-label"),i(12,"\u0422\u044A\u0440\u0441\u0435\u043D\u0435 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430"),t(),n(13,"input",4),B("ngModelChange",function(s){return w(r.searchTerm,s)||(r.searchTerm=s),s}),x("input",function(s){return r.onSearchChange(s)}),t(),n(14,"mat-icon",5),i(15,"search"),t()()(),c(16,gt,4,0,"div",6)(17,ft,7,1,"div",7)(18,Mt,3,4,"div",8)(19,vt,11,0,"div",9),d(20,"async"),t()),e&2){let l;o(13),T("ngModel",r.searchTerm),o(3),m("ngIf",r.isLoading),o(),m("ngIf",r.error),o(),m("ngIf",!r.isLoading&&!r.error),o(),m("ngIf",!r.isLoading&&!r.error&&((l=f(20,5,r.filteredFamilies$))==null?null:l.length)===0)}},dependencies:[N,L,$,V,U,W,R,H,X,Y,K,G,Q,J,q,ut,at,nt,it,et,Z,tt,rt,ot,lt,mt,j,z,ct],styles:[".catalog-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.create-button[_ngcontent-%COMP%]{margin:16px 0}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:8px;color:#333}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#666;margin-bottom:24px}.search-field[_ngcontent-%COMP%]{width:100%;max-width:400px}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto 16px}.error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px}.families-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:24px;margin-top:24px}.family-card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}.family-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #00000026}.family-description[_ngcontent-%COMP%]{color:#666;line-height:1.5;margin-bottom:16px}.family-stats[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:8px}.stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.9rem;color:#666}.stat[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px}mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:8px}@media (max-width: 768px){.catalog-container[_ngcontent-%COMP%]{padding:16px}.families-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}"]})};export{pt as FamilyCatalogComponent};

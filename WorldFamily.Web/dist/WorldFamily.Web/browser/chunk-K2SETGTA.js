import{b as U,f as Y,i as q,r as z}from"./chunk-J6HH3CIW.js";import{a as G}from"./chunk-DE2J6CGE.js";import{a as H}from"./chunk-IVNTOVZQ.js";import{d as $,e as j,g as N,j as V,k as W,w as R}from"./chunk-Q7HNEB5Z.js";import{$b as d,Gb as O,Kb as b,Lb as g,M as E,N as S,O as D,Ra as a,Wa as T,Xb as h,Zb as n,_b as C,bb as A,ca as I,cc as P,da as w,dc as k,ec as M,f as v,gb as f,ic as B,j as x,jc as p,kc as y,mc as L,wb as m,x as _,xb as t,yb as i,z as F,zb as l}from"./chunk-AKCSPO7I.js";import"./chunk-4CLCTAJ7.js";var K=u=>["/families",u];function Q(u,r){u&1&&(t(0,"div",15)(1,"div",16)(2,"span",17),n(3,"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043D\u0435..."),i()(),t(4,"p",18),n(5,"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043D\u0435 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430..."),i()())}function X(u,r){if(u&1){let e=O();t(0,"div",19),l(1,"i",20),t(2,"h4"),n(3,"\u0412\u044A\u0437\u043D\u0438\u043A\u043D\u0430 \u0433\u0440\u0435\u0448\u043A\u0430"),i(),t(4,"p",21),n(5),i(),t(6,"button",22),b("click",function(){I(e);let s=g();return w(s.loadFamilies())}),l(7,"i",23),n(8," \u041E\u043F\u0438\u0442\u0430\u0439\u0442\u0435 \u043E\u0442\u043D\u043E\u0432\u043E "),i()()}if(u&2){let e=g();a(5),C(e.error)}}function Z(u,r){u&1&&(t(0,"span"),n(1,"..."),i())}function ee(u,r){if(u&1&&(t(0,"div",26)(1,"div",27)(2,"div",28),l(3,"i",29),t(4,"h5",30),n(5),i()(),t(6,"div",31)(7,"p",32),l(8,"i",33),n(9),p(10,"relativeDate"),i(),t(11,"p",34),n(12),p(13,"slice"),f(14,Z,2,0,"span",35),i(),t(15,"div",36)(16,"small",18),l(17,"i",37),n(18),i(),t(19,"small",38),l(20,"i",39),n(21),i()()(),t(22,"div",40)(23,"a",41),l(24,"i",42),n(25," \u0420\u0430\u0437\u0433\u043B\u0435\u0434\u0430\u0439 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E\u0442\u043E "),i()()()()),u&2){let e=r.$implicit;a(5),C(e.name),a(4),d(" \u0421\u044A\u0437\u0434\u0430\u0434\u0435\u043D\u043E ",y(10,15,e.createdAt)," "),a(3),d(" ",L(13,17,e.description||"\u041D\u044F\u043C\u0430 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",0,120)," "),a(2),m("ngIf",e.description&&e.description.length>120),a(4),d(" ",e.memberCount||0," \u0447\u043B\u0435\u043D\u043E\u0432\u0435 "),a(),h("bg-success",e.isPublic)("bg-secondary",!e.isPublic),a(),h("fa-globe",e.isPublic)("fa-lock",!e.isPublic),a(),d(" ",e.isPublic?"\u041F\u0443\u0431\u043B\u0438\u0447\u043D\u043E":"\u0427\u0430\u0441\u0442\u043D\u043E"," "),a(2),m("routerLink",B(21,K,e.id))}}function te(u,r){if(u&1&&(t(0,"div",24),f(1,ee,26,23,"div",25),p(2,"async"),i()),u&2){let e=g();a(),m("ngForOf",y(2,2,e.filteredFamilies$))("ngForTrackBy",e.trackByFamilyId)}}function ie(u,r){u&1&&(t(0,"div",15),l(1,"i",43),t(2,"h3",18),n(3,"\u041D\u044F\u043C\u0430 \u043D\u0430\u043C\u0435\u0440\u0435\u043D\u0438 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430"),i(),t(4,"p",44),n(5,"\u0421\u0442\u0430\u043D\u0435\u0442\u0435 \u043F\u044A\u0440\u0432\u0438\u044F, \u043A\u043E\u0439\u0442\u043E \u0449\u0435 \u0441\u044A\u0437\u0434\u0430\u0434\u0435 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E\u0442\u043E \u0441\u0438!"),i(),t(6,"a",45),l(7,"i",7),n(8," \u0421\u044A\u0437\u0434\u0430\u0439 \u043F\u044A\u0440\u0432\u043E\u0442\u043E \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E "),i()())}var J=class u{constructor(r){this.familyService=r;this.families$=this.familyService.families$,this.filteredFamilies$=this.searchSubject.pipe(E(""),F(300),S(e=>this.familyService.searchFamilies(x(e))),_(e=>(this.error="\u0413\u0440\u0435\u0448\u043A\u0430 \u043F\u0440\u0438 \u0442\u044A\u0440\u0441\u0435\u043D\u0435 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430",x([]))))}destroy$=new v;searchSubject=new v;families$;filteredFamilies$;isLoading=!0;error=null;searchTerm="";ngOnInit(){this.loadFamilies()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadFamilies(){this.isLoading=!0,this.error=null,this.familyService.getFamilies().pipe(D(this.destroy$)).subscribe({next:r=>{this.isLoading=!1,this.searchSubject.next(this.searchTerm)},error:r=>{this.isLoading=!1,this.error="\u041D\u0435\u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0440\u0435\u0436\u0434\u0430\u043D\u0435 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430. \u041C\u043E\u043B\u044F \u043E\u043F\u0438\u0442\u0430\u0439\u0442\u0435 \u043E\u0442\u043D\u043E\u0432\u043E.",console.error("Error loading families:",r)}})}onSearchChange(r){let e=r.target.value;this.searchTerm=e,this.searchSubject.next(e)}trackByFamilyId(r,e){return e.id}static \u0275fac=function(e){return new(e||u)(T(H))};static \u0275cmp=A({type:u,selectors:[["app-family-catalog"]],decls:20,vars:7,consts:[[1,"container","my-4"],[1,"text-center","mb-5"],[1,"display-4","text-primary-custom","mb-3"],[1,"fas","fa-users","me-3"],[1,"lead","text-muted","mb-4"],[1,"d-flex","flex-column","flex-md-row","gap-3","justify-content-center","align-items-center"],["routerLink","/families/create",1,"btn","btn-primary","btn-lg"],[1,"fas","fa-plus","me-2"],[1,"input-group",2,"max-width","400px"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","\u0422\u044A\u0440\u0441\u0435\u043D\u0435 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430...",1,"form-control",3,"ngModelChange","input","ngModel"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger text-center","role","alert",4,"ngIf"],["class","row g-4",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","spinner-border-custom","mb-3"],[1,"visually-hidden"],[1,"text-muted"],["role","alert",1,"alert","alert-danger","text-center"],[1,"fas","fa-exclamation-triangle","fa-2x","mb-3"],[1,"mb-3"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-redo","me-2"],[1,"row","g-4"],["class","col-12 col-md-6 col-lg-4",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-12","col-md-6","col-lg-4"],[1,"card","family-card","h-100","shadow-sm"],[1,"card-header","bg-primary-custom","text-white","d-flex","align-items-center"],[1,"fas","fa-home","me-2"],[1,"mb-0"],[1,"card-body","d-flex","flex-column"],[1,"text-muted","small","mb-2"],[1,"fas","fa-calendar","me-1"],[1,"card-text","flex-grow-1"],[4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fas","fa-users","me-1"],[1,"badge"],[1,"fas"],[1,"card-footer","bg-transparent"],[1,"btn","btn-outline-primary","w-100",3,"routerLink"],[1,"fas","fa-eye","me-2"],[1,"fas","fa-family","fa-4x","text-muted","mb-3"],[1,"text-muted","mb-4"],["routerLink","/families/create",1,"btn","btn-primary"]],template:function(e,o){if(e&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),l(3,"i",3),n(4," \u041A\u0430\u0442\u0430\u043B\u043E\u0433 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u0430 "),i(),t(5,"p",4),n(6,"\u0420\u0430\u0437\u0433\u043B\u0435\u0434\u0430\u0439\u0442\u0435 \u0441\u0435\u043C\u0435\u0439\u043D\u0438\u0442\u0435 \u0438\u0441\u0442\u043E\u0440\u0438\u0438 \u0438 \u043E\u0442\u043A\u0440\u0438\u0439\u0442\u0435 \u0432\u0440\u044A\u0437\u043A\u0438"),i(),t(7,"div",5)(8,"a",6),l(9,"i",7),n(10," \u0421\u044A\u0437\u0434\u0430\u0439 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E "),i(),t(11,"div",8)(12,"span",9),l(13,"i",10),i(),t(14,"input",11),M("ngModelChange",function(c){return k(o.searchTerm,c)||(o.searchTerm=c),c}),b("input",function(c){return o.onSearchChange(c)}),i()()()(),f(15,Q,6,0,"div",12)(16,X,9,1,"div",13)(17,te,3,4,"div",14)(18,ie,9,0,"div",12),p(19,"async"),i()),e&2){let s;a(14),P("ngModel",o.searchTerm),a(),m("ngIf",o.isLoading),a(),m("ngIf",o.error),a(),m("ngIf",!o.isLoading&&!o.error),a(),m("ngIf",!o.isLoading&&!o.error&&((s=y(19,5,o.filteredFamilies$))==null?null:s.length)===0)}},dependencies:[W,$,j,R,z,U,Y,q,N,V,G],styles:[".family-card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease;border:none}.family-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #00000026!important}.bg-primary-custom[_ngcontent-%COMP%]{background-color:var(--primary-color)!important}.text-primary-custom[_ngcontent-%COMP%]{color:var(--primary-color)!important}"]})};export{J as FamilyCatalogComponent};

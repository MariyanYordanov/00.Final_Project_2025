import{a as X,b as Z}from"./chunk-7G3PKSSV.js";import{a as K}from"./chunk-6QGJ2LHV.js";import{a as Q}from"./chunk-Z7ZUHWT3.js";import{a as W}from"./chunk-LC6B2GZH.js";import{a as G,b as J}from"./chunk-XUDR7UJO.js";import{a as L,b as $,c as N,d as R,e as j,f as V,g as z,h as Y,i as q}from"./chunk-ZDLTPOFL.js";import{W as H,X as U}from"./chunk-6DOHFCOB.js";import{a as T,c as w,d as A}from"./chunk-XTCHCJBU.js";import{h as O,i as D,l as P,m as B,n as k}from"./chunk-P3IMMIVJ.js";import{Ab as o,Bb as n,Cb as i,Db as E,Kb as I,Ob as S,P as _,Qb as l,Sa as r,Xa as f,cb as M,cc as a,da as C,dc as c,ea as h,ec as p,f as b,ib as d,mc as x,nc as s,oc as g,pc as F,qc as y}from"./chunk-3PJXDOL5.js";import"./chunk-4CLCTAJ7.js";var te=t=>["/families",t,"members","create"],ie=t=>["/members",t];function ne(t,m){t&1&&(n(0,"div",4),E(1,"mat-spinner"),n(2,"p"),a(3,"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043D\u0435 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E..."),i()())}function ae(t,m){if(t&1){let e=I();n(0,"div",5)(1,"mat-icon",6),a(2,"error"),i(),n(3,"p"),a(4),i(),n(5,"button",7),S("click",function(){C(e);let v=l();return h(v.loadFamily())}),a(6," \u041E\u043F\u0438\u0442\u0430\u0439\u0442\u0435 \u043E\u0442\u043D\u043E\u0432\u043E "),i()()}if(t&2){let e=l();r(4),c(e.error)}}function re(t,m){if(t&1&&(n(0,"p",20),a(1),i()),t&2){let e=l(2);r(),p(" ",e.family.description," ")}}function me(t,m){if(t&1&&(n(0,"div",14)(1,"mat-icon"),a(2,"location_on"),i(),n(3,"span"),a(4),i()()),t&2){let e=l(2);r(4),c(e.family.location)}}function oe(t,m){if(t&1&&(n(0,"div",21)(1,"mat-icon"),a(2,"person_add"),i(),n(3,"p"),a(4,"\u041D\u044F\u043C\u0430 \u0434\u043E\u0431\u0430\u0432\u0435\u043D\u0438 \u0447\u043B\u0435\u043D\u043E\u0432\u0435 \u043A\u044A\u043C \u0442\u043E\u0432\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E"),i(),n(5,"button",22)(6,"mat-icon"),a(7,"add"),i(),a(8," \u0414\u043E\u0431\u0430\u0432\u0438 \u043F\u044A\u0440\u0432\u0438\u044F \u0447\u043B\u0435\u043D "),i()()),t&2){let e=l(2);r(5),o("routerLink",x(1,te,e.family.id))}}function le(t,m){if(t&1&&(n(0,"span"),a(1),s(2,"memberAge"),i()),t&2){let e=l().$implicit;r(),p(" \u2022 ",g(2,1,e.dateOfBirth)," ")}}function de(t,m){if(t&1&&(n(0,"div",14)(1,"mat-icon"),a(2,"cake"),i(),n(3,"span"),a(4),s(5,"date"),i()()),t&2){let e=l().$implicit;r(4),c(F(5,1,e.dateOfBirth,"dd.MM.yyyy"))}}function ce(t,m){if(t&1&&(n(0,"div",14)(1,"mat-icon"),a(2,"place"),i(),n(3,"span"),a(4),i()()),t&2){let e=l().$implicit;r(4),c(e.placeOfBirth)}}function pe(t,m){t&1&&(n(0,"span"),a(1,"..."),i())}function ue(t,m){if(t&1&&(n(0,"p",28),a(1),s(2,"slice"),d(3,pe,2,0,"span",3),i()),t&2){let e=l().$implicit;r(),p(" ",y(2,2,e.biography,0,100)," "),r(2),o("ngIf",e.biography.length>100)}}function se(t,m){if(t&1&&(n(0,"mat-card",25)(1,"mat-card-header")(2,"mat-card-title"),a(3),s(4,"fullName"),i(),n(5,"mat-card-subtitle"),a(6),d(7,le,3,3,"span",3),i()(),n(8,"mat-card-content")(9,"div",26),d(10,de,6,4,"div",13)(11,ce,5,1,"div",13),i(),d(12,ue,4,6,"p",27),i(),n(13,"mat-card-actions")(14,"button",22)(15,"mat-icon"),a(16,"visibility"),i(),a(17," \u0414\u0435\u0442\u0430\u0439\u043B\u0438 "),i()()()),t&2){let e=m.$implicit;r(3),p(" ",y(4,7,e.firstName,e.middleName,e.lastName)," "),r(3),p(" ",e.gender," "),r(),o("ngIf",e.dateOfBirth),r(3),o("ngIf",e.dateOfBirth),r(),o("ngIf",e.placeOfBirth),r(),o("ngIf",e.biography),r(2),o("routerLink",x(11,ie,e.id))}}function fe(t,m){if(t&1&&(n(0,"div",23),d(1,se,18,13,"mat-card",24),i()),t&2){let e=l(2);r(),o("ngForOf",e.members)("ngForTrackBy",e.trackByMemberId)}}function _e(t,m){if(t&1&&(n(0,"div")(1,"div",8)(2,"button",9)(3,"mat-icon"),a(4,"arrow_back"),i(),a(5," \u041E\u0431\u0440\u0430\u0442\u043D\u043E \u043A\u044A\u043C \u043A\u0430\u0442\u0430\u043B\u043E\u0433\u0430 "),i(),n(6,"mat-card",10)(7,"mat-card-header")(8,"mat-card-title"),a(9),i(),n(10,"mat-card-subtitle"),a(11),s(12,"relativeDate"),i()(),n(13,"mat-card-content"),d(14,re,2,1,"p",11),n(15,"div",12),d(16,me,5,1,"div",13),n(17,"div",14)(18,"mat-icon"),a(19,"people"),i(),n(20,"span"),a(21),i()(),n(22,"div",14)(23,"mat-icon"),a(24),i(),n(25,"span"),a(26),i()()()()()(),n(27,"div",15)(28,"div",16)(29,"h2"),a(30,"\u0427\u043B\u0435\u043D\u043E\u0432\u0435 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E\u0442\u043E"),i(),n(31,"button",17)(32,"mat-icon"),a(33,"person_add"),i(),a(34," \u0414\u043E\u0431\u0430\u0432\u0438 \u0447\u043B\u0435\u043D "),i()(),d(35,oe,9,3,"div",18)(36,fe,2,2,"div",19),i()()),t&2){let e=l();r(9),c(e.family.name),r(2),p(" \u0421\u044A\u0437\u0434\u0430\u0434\u0435\u043D\u043E ",g(12,10,e.family.createdAt)," "),r(3),o("ngIf",e.family.description),r(2),o("ngIf",e.family.location),r(5),p("",e.members.length," \u0447\u043B\u0435\u043D\u043E\u0432\u0435"),r(3),c(e.family.isPublic?"public":"lock"),r(2),c(e.family.isPublic?"\u041F\u0443\u0431\u043B\u0438\u0447\u043D\u043E":"\u0427\u0430\u0441\u0442\u043D\u043E"),r(5),o("routerLink",x(12,te,e.family.id)),r(4),o("ngIf",e.members.length===0),r(),o("ngIf",e.members.length>0)}}var ee=class t{constructor(m,e,u,v){this.route=m;this.router=e;this.familyService=u;this.memberService=v}destroy$=new b;family=null;members=[];isLoading=!0;error=null;familyId=0;ngOnInit(){this.route.params.pipe(_(this.destroy$)).subscribe(m=>{this.familyId=+m.id,this.familyId?this.loadFamily():(this.error="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0438\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440 \u043D\u0430 \u0441\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E",this.isLoading=!1)})}ngAfterViewInit(){setTimeout(()=>{this.familyId&&this.loadMembers()},500)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadFamily(){this.isLoading=!0,this.error=null,this.familyService.getFamilyById(this.familyId).pipe(_(this.destroy$)).subscribe({next:m=>{this.family=m,this.loadMembers()},error:m=>{this.isLoading=!1,this.error="\u0421\u0435\u043C\u0435\u0439\u0441\u0442\u0432\u043E\u0442\u043E \u043D\u0435 \u0435 \u043D\u0430\u043C\u0435\u0440\u0435\u043D\u043E \u0438\u043B\u0438 \u0432\u044A\u0437\u043D\u0438\u043A\u043D\u0430 \u0433\u0440\u0435\u0448\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0440\u0435\u0436\u0434\u0430\u043D\u0435\u0442\u043E.",console.error("Error loading family:",m)}})}loadMembers(){this.memberService.getMembersByFamily(this.familyId).pipe(_(this.destroy$)).subscribe({next:m=>{this.members=m,this.isLoading=!1},error:m=>{this.members=[],this.isLoading=!1,console.error("Error loading members:",m)}})}refreshMembers(){this.loadMembers()}trackByMemberId(m,e){return e.id}static \u0275fac=function(e){return new(e||t)(f(T),f(w),f(Q),f(W))};static \u0275cmp=M({type:t,selectors:[["app-family-details"]],decls:4,vars:3,consts:[[1,"details-container"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],[1,"error-container"],["color","warn"],["mat-raised-button","","color","primary",3,"click"],[1,"family-header"],["mat-button","","routerLink","/families",1,"back-button"],[1,"family-card"],["class","family-description",4,"ngIf"],[1,"family-info"],["class","info-item",4,"ngIf"],[1,"info-item"],[1,"members-section"],[1,"members-header"],["mat-raised-button","","color","primary",3,"routerLink"],["class","empty-members",4,"ngIf"],["class","members-grid",4,"ngIf"],[1,"family-description"],[1,"empty-members"],["mat-button","","color","primary",3,"routerLink"],[1,"members-grid"],["class","member-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"member-card"],[1,"member-info"],["class","member-bio",4,"ngIf"],[1,"member-bio"]],template:function(e,u){e&1&&(n(0,"div",0),d(1,ne,4,0,"div",1)(2,ae,7,1,"div",2)(3,_e,37,14,"div",3),i()),e&2&&(r(),o("ngIf",u.isLoading),r(),o("ngIf",u.error),r(),o("ngIf",u.family&&!u.isLoading&&!u.error))},dependencies:[k,O,D,A,z,L,j,N,V,R,$,U,H,J,G,q,Y,B,P,K,X,Z],styles:[".details-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{text-align:center;padding:48px 24px}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto 16px}.error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px}.back-button[_ngcontent-%COMP%]{margin-bottom:16px}.family-card[_ngcontent-%COMP%]{margin-bottom:32px}.family-description[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.6;margin-bottom:16px;color:#666}.family-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#666}.info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;height:20px;width:20px}.members-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.members-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.empty-members[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#666}.empty-members[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px}.members-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:24px}.member-card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.member-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.member-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.member-bio[_ngcontent-%COMP%]{color:#666;font-size:.9rem;line-height:1.4}@media (max-width: 768px){.details-container[_ngcontent-%COMP%]{padding:16px}.members-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.family-info[_ngcontent-%COMP%]{flex-direction:column;gap:12px}}"]})};export{ee as FamilyDetailsComponent};
